9-01-2024

1) Сбор данных -> [Направление измерений] в окне настройки скважины
2) Для вертикальных скважин убрать из окна настройки геопривязку
3) Для горизонтальных сделать радиокнопки один/два прохода [ глухая/открытая]
4) Для горизонтальных двухпроходных автоперемещение по клеткам в табице сверху вниз(прямой проход)X1/снизу вверх (обратный проход)X2

/*
Добрый день!
У нас оказаласась одна заковырка: у заказчика для которого мы все делаем открытые горизонтальные двухпроходные скважины.
Способ измерения в таких скважинах описан в разделе 5.3 инструкции (прикладываю).
Собсвенно заковырка в том, что зонд сначала тянут в прямом проходе слева направо, а в обратном справо-налево. Т.е. как раз меняется направление измерений. которое я  говорил, что меняться не может..
Сергей, прошу вас подумать, как это можно  реализовать в смартлоггере малой кровью.
Александр, прошу проверить, что GBI этот случай отрабатывает корректно, в соответствии с РЭ.
Александр, так же прошу вас при реализации функционала создания конфиг-файла руководствоваться разделом 8.3
*/

Коллеги, я бы хотел определиться с терминологией, которой далее давайте следовать:
0. Цикл измерений- протяженный во времени набор измерений, например в цикле может быть 12 измерений проводимых в течении года каждый месяц.
1. Измерение - процесс определения профиля скаважины. Измерение проводится единовременно, но может занимать несколько часов. Через 5 минут пользователь может захотеть сделать еще одно измерение. Измерение состоит из двух Проходов. 
2. Проход - последовательность действий по снятию показаний на разных уровнях. Два прохода образуют Измерение. Проход может быть Первый (или Прямой)  и Второй (или Обратный)при этом зонд разворачивается на 180 градусов относительно первого прохода. 
Т.е. для вертикальных скважин, например, зонд ставится в Первом (или Прямом) проходе так чтобы ось Х смотрела на Юг, то при втором (или Обратном) проходе она будет смотреть на север, для горизонтальных скважин Первый (или Прямой) проход это когда зонд заталкивается кабелем назад, а Второй (или Обратный)кабелем вперед.

P.S. бывают еще однопроходные скважины (это горизонтальные скважины с глухим забоем) но сейчас мы опустим их из рассмотрения. 

3. Направление-  направление движение зонда в рамках всего цикла измерений
3.1 Направление "От себя"  подразумевает что при измерении зонд перемещают от 0 (ближнего к измеряющему уровня к максимальному через каждые 0,5м) Это может быть как в вертикальных, так и в горизонтальных скважинах
3.2 Направление "К себе" подразумевает, что измерения проводятся от дальнего уровня к ближнему т.е. для 50-м скважин от уровня 50 к уровню 0.

ВАЖНО:
Направление - это атрибут скважины, нельзя в рамках одного  ЦИКЛА измерения сделать прямой ход в направлении "к себе", а обратный ход в направлении "от себя". Это методически не верно, и нельзя давать пользователю возможность это делать. Эту блокировку сейчас можно не внедрять, но в дальнейшем это нужно сделать.

У меня вопрос по файлу конфигурации:

Сергей, а сколько уровней и какой глубины скважины, в которых нет "@......."? и это какое направление (сверху-вниз или снизу-вверх) имеют такие скважины?
Правильно ли я понимаю, что при создании конфигурации через GBI таких недозаполненных скважин впринципе не будет?

5) При создании скважины задавать начальный и конечный уровни в метрах с шагом 0.5

Направление "От себя" от первого   / сверху вниз /
Направление "К себе" от последнего / снизу вверх /

@ - вертикальная

1 - 40 От меньшего к большему [ОТ себя]
40 - 1 От большего к меньшему [К себе]

$НН-КК - для горизонтальных ??? однопроходная
$$НН-КК - для горизонтальных ??? двухпроходная

ИБ предлагает

@ - вертикальная, автоопределение по знаку разницы первой и второй цифры
$ - двухпроходная горизонтаьная
& - однопроходная горизонталная

27-05-2024
----------

вертикальная двухпроходная по определению
расчет всегда от нижней точки настройку убрать

прежний расчет делалась поправка относительно нижней точки вычиталась
убрать поправку проверить по присланному тесту
вертикальная скважина всегда двухпроходная
сообщение от какой точки будет считать когда выбрали глубины

help с выводом методики расчета
автопереход на соседнюю клетку проверить от (с верхней/нихней)
у заказчика на скважине 20м данные со смартлогера приходилось дважды нажимать ЗАВЕРШИТЬ чтобы посчитать
В шапке таблицы Уровень, м.
Погрешность трубы убрать
X1, угл.сек. и так все углы
LX, мм LY, мм 

Рез.см -> Lres, мм
Рез.уг -> Азимут, град.

проверить что и как выводит на графики
провести рабочий тест по присланой таблице
В excel шапка аналогичный апдей
В GBI в таблице только сырые данные, LX LY
На графике только LX LY
Набор кнопок аналогично GTM

анализ 17-06-2024

от 24-12-23

		Горизонтальная однопроходная
		-----------------------------

1. На отметке 0 снимаются показания X1 и X2
2. На отмкетке ниже 0 снимаются показания только X1
3. На отметке 0 Xres = (X1-X2)/2
4. На отметке 0 Zshift = xres = (X1+X2)/2
5. На отметке 0 Lx = 0
6. На отметках ниже 0 Xres = Zshift - X1
7. На отметках ниже 0 Lx = (Depth_current - Depth_prev) * Sin(Xres_prev/3600*PI/180) * 1000 + LX_prev


от 17-06-24 восстановлено по коду

		Вертикальная двухпроходня расчет от последней точки
		---------------------------------------------------

1		Выбрать отсчет начиная с последнего
2		Если для нулевого отсчета (X2 = 0)  X1 = X1 * -1
3		Вычислить Xres = (x1-x2)/2)
4		Вычислить Yres = (y1-y2)/2)
5			Для последнего отсчета принимаем Lx = 0 Ly = 0*/
6			Для остальных
7				Вычислить Lx = (depth[i+1] - depth) * sin(Xres[i+1]))/3600*PI/180) * 1000 + Lx[i+1]
8				Вычислить Ly = (depth[i+1] - depth) * sin(Yres[i+1]))/3600*PI/180) * 1000 + Yx[i+1]
9				убрать: Для [пред]последнего отсчета применить поправку -Lx: (Lx = 0)
10				Вычислить Lr = sqrt(lx^2 + Ly2)


Lx Xres поменять местами единицы
На графиках показывать смещение в миллиметрах
Должно быть как на контрольном примере

В таблице сначала все по X потом все по Y потом Рез
