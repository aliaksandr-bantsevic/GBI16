//---------------------------------------------------------------------------

#ifndef DataFileH
#define DataFileH
//---------------------------------------------------------------------------
#endif

#include "defs.h"

typedef struct {

	WideString 	place;
	WideString 	drill;
	TDateTime   tcreated;
	int 		dir;
	double      level;
	double      X;
    double      Y;

} data_file_record;


/*
Объект; Место; Дата; Направление; Позиция; X; Y;
*/

typedef enum {

	w_place,
	w_drill,
	w_date,
	w_direction,
	w_position,
	w_X,
	w_Y

} pars_pos_type;

class TDataFile {

public:

	TDataFile();
	~TDataFile();

public:

	FILE* file;
	char cbuf[1024];
	int cbuf_idx;
	char str[1024];
	int str_idx;
	TCHAR tbuf[1024];
	int tbuf_idx;
	pars_pos_type pars_pos;

public:

	int OpenFile(TCHAR* tdir);
	int CheckFile(void);
	void Close(void);
	int GetStr();
	int GetWord(void);
};
